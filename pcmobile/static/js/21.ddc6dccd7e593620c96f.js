webpackJsonp([21],{"2YY5":function(t,e){},"8bTz":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("4YfN"),a=s.n(i),n=s("9rMa"),o=s("j108"),l=s("inDh"),r=s("cy8Z"),c=s("zv2G"),u=(o.a,l.a,r.a,c.a,a()({},Object(n.c)(["platformConfig"])),{components:{Tab:o.a,TabItem:l.a,Marquee:r.a,MarqueeItem:c.a},data:function(){return{showStep1:!0,introShow:!0,ruleShow:!1,congratulation:!1,gameTime:0,indexMsg:null,rules:null,myAward:null,page:1,result:{},id:0,haveChance:!0,pullUpLoad:!1,browserkernel:"",templateNum:"",styleTemplate:null}},computed:a()({},Object(n.c)(["platformConfig"])),created:function(){document.title="刮刮乐",this._getActivityBack(),this.browserRedirect(),this.id=this.$route.query.id,this.id&&(this._getIndex(),this._getRules())},mounted:function(){var t=this;window.onresize=function(){clearTimeout(t.browserTime),t.browserTime=setTimeout(function(){t.browserRedirect()},400)}},methods:{_getActivityBack:function(){var t=this,e={type:4};this.$http.post(this.urlRequest+"?m=api&c=app&a=getActivityBack",e).then(function(e){t.templateNum=e.data,console.log("风格模板：",e.data)})},playAgain:function(){this.page=1,this._getRules(),this.initCvs(),this._getIndex(),this.showStep1=!0,this.congratulation=!1},goGuaJiang:function(){0!=this.gameTime&&this.haveChance?(this.showStep1=!1,this._getLucDraw()):this.$vux.toast.text("Sorry, you have no draws","bottom")},browserRedirect:function(){var t=this,e=navigator.userAgent.toLowerCase(),s="ipad"==e.match(/ipad/i),i="iphone os"==e.match(/iphone os/i),a="midp"==e.match(/midp/i),n="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),o="ucweb"==e.match(/ucweb/i),l="android"==e.match(/android/i),r="windows ce"==e.match(/windows ce/i),c="windows mobile"==e.match(/windows mobile/i);this.browserkernel=s||i||a||n||o||l||r||c?"h5":"pc",setTimeout(function(){t.initCvs()})},initCvs:function(){var t=this,e=document.getElementById("mpCvs"),s=document.getElementById("rstBox");e.setAttribute("class",""),e.width=s.clientWidth,e.height=s.clientHeight;var i=e.getContext("2d"),a=t.getElementLeft(e),n=t.getElementTop(e),o=!1;e.width,e.height;i.fillStyle="silver",i.fillRect(0,0,e.width,e.height),e.addEventListener("touchstart",function(){o=!0,i.lineWidth=10,i.moveTo(event.touches[0].clientX-a,event.touches[0].clientY-n+window.pageYOffset)}),e.onmousedown=function(t){o=!0,i.lineWidth=10,i.moveTo(event.clientX-a,event.clientY-n+window.pageYOffset)},e.addEventListener("touchend",function(){o=!1,i.globalCompositeOperation="source-over"}),e.onmouseup=function(t){o=!1,i.globalCompositeOperation="source-over"},e.addEventListener("touchmove",function(s){if(i.globalCompositeOperation="destination-out",o){i.lineTo(event.touches[0].clientX-a,event.touches[0].clientY-n+window.pageYOffset),i.stroke();for(var l=i.getImageData(0,0,e.width,e.height),r=l.width*l.height,c=0,u=0;u<r;u++)0==l.data[4*u+3]&&c++;c>=.5*r&&(e.setAttribute("class","disappear"),t.congratulation=!0)}}),e.onmousemove=function(s){if(i.globalCompositeOperation="destination-out",o){i.lineTo(event.clientX-a,event.clientY-n+window.pageYOffset),i.stroke();for(var l=i.getImageData(0,0,e.width,e.height),r=l.width*l.height,c=0,u=0;u<r;u++)0==l.data[4*u+3]&&c++;c>=.5*r&&(e.setAttribute("class","disappear"),t.congratulation=!0)}},e.onmouseleave=function(t){}},getElementLeft:function(t){for(var e=t.offsetLeft,s=t.offsetParent;null!==s;)e+=s.offsetLeft,s=s.offsetParent;return e},getElementTop:function(t){for(var e=t.offsetTop,s=t.offsetParent;null!==s;)e+=s.offsetTop,s=s.offsetParent;return e},ruleHide:function(){this.introShow=!0,this.ruleShow=!1},tabChange:function(t){var e=this;0==t?(this.introShow=!0,this.pullUpLoad=!1,setTimeout(function(){e.$refs.scroll.initScroll()},20)):(this.introShow=!1,this.pullUpLoad=!0,setTimeout(function(){e.$refs.scroll.initScroll()},20))},pullingDown:function(){this.page=1,this._getRules()},pullingUp:function(){this.pullUpLoadFlag?this.$refs.scroll.forceUpdate(!1):(this.page+=1,this._getRules())},_getRules:function(){var t=this,e={};e.id=t.id,e.type=5,e.page=t.page,t.pullUpLoadFlag=!1,t.$http.post(t.urlRequest+"?m=web&c=activity&a=nineRole",e).then(function(e){0==e.status&&(t.rules=e.result,1==t.page?t.myAward=e.result.list:t.myAward=t.myAward.concat(e.result.list),e.result.list.length<20&&(t.pullUpLoadFlag=!0))}).catch(function(t){console.log(t)})},_getIndex:function(){var t=this,e={};e.id=t.id,e.type=5,t.$vux.loading.show(),t.$http.post(t.urlRequest+"?m=web&c=activity&a=nineIndex",e).then(function(e){0==e.status&&(t.indexMsg=e.result,t.gameTime=t.indexMsg.num),t.$vux.loading.hide()}).catch(function(e){t.$vux.loading.hide(),console.log(e)})},_getLucDraw:function(){var t=this,e={};e.id=t.id,e.type=5,t.$http.post(t.urlRequest+"?m=web&c=activity&a=nineLucDraw",e).then(function(e){0==e.status?(t.result=e.result,t.gameTime=t.result.num):(e.ret_msg&&""!=e.ret_msg&&t.$vux.toast.text(e.ret_msg,"bottom"),t.haveChance=!1)}).catch(function(e){t.$vux.toast.text("Lottery information is wrong, please try again","bottom"),console.log(e)})}},watch:{browserkernel:function(t){2==this.templateNum?this.styleTemplate="h5"==t?"mobileStyle1":"pcStyle1":4==this.templateNum&&(this.styleTemplate="h5"==t?"mobileStyle2":"pcStyle2")},templateNum:function(t){2==t&&(this.styleTemplate="h5"==this.browserkernel?"mobileStyle1":"pcStyle1"),4==t&&(this.styleTemplate="h5"==this.browserkernel?"mobileStyle2":"pcStyle2")},platformConfig:function(t){t.platform_name&&(document.title="刮刮乐")}},beforeDestroy:function(){}}),v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"guaguale",class:t.styleTemplate},["h5"==t.browserkernel?i("div",{staticClass:"mobilePanel"},[i("div",{staticClass:"img1"},[i("div",{staticClass:"hdjn",on:{click:function(e){t.ruleShow=!0}}},[t._v("活动锦囊")]),t._v(" "),t.rules?i("p",[t._v("活动日期："+t._s(t.rules.time.start_time)+"至"+t._s(t.rules.time.end_time))]):t._e()]),t._v(" "),i("div",{staticClass:"panel"},[i("div",{staticClass:"cvsPanel"},[i("div",{attrs:{id:"rstBox"}},[t.result?i("div",{staticClass:"rstStep2"},[t._v(t._s(t.result.prize_project))]):t._e(),t._v(" "),i("canvas",{attrs:{id:"mpCvs"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showStep1,expression:"showStep1"}],staticClass:"rstStep1"},[i("p",[t._v("您有"),i("span",[t._v(t._s(t.gameTime))]),t._v("次刮奖机会")]),t._v(" "),i("button",{on:{click:t.goGuaJiang}},[t._v("立即刮奖")])])])]),t._v(" "),i("div",{staticClass:"zjPanel"},[i("div",[t._v("中奖名单")]),t._v(" "),i("div",{staticClass:"zjList"},[t.indexMsg?i("ul",{class:{needLoop:t.indexMsg.list.length>3}},t._l(t.indexMsg.list,function(e,s){return i("li",{key:s},[i("span",[t._v("恭喜"+t._s(e.username))]),i("span",[t._v("获得"+t._s(e.prize_project)+t._s(e.prize_name))])])})):t._e()])]),t._v(" "),t.rules?i("p",{staticClass:"copy",domProps:{innerHTML:t._s(t.rules.statement)}}):t._e()])]):t._e(),t._v(" "),"pc"==t.browserkernel?i("div",{staticClass:"pcPanel"},[i("div",{staticClass:"topLeft"}),t._v(" "),i("div",{staticClass:"topRight"}),t._v(" "),i("div",{staticClass:"img1"},[i("div",{staticClass:"hdjn",on:{click:function(e){t.ruleShow=!0}}},[t._v("活动锦囊")]),t._v(" "),t.rules?i("p",[t._v("活动日期："+t._s(t.rules.time.start_time)+"至"+t._s(t.rules.time.end_time))]):t._e()]),t._v(" "),i("div",{staticClass:"panel"},[i("div",[i("div",{staticClass:"zjPanel"},[i("h2",{staticClass:"h2Tit"},[t._v("中奖名单")]),t._v(" "),i("div",{staticClass:"content-wrapper"},[i("div",{staticClass:"zjList"},[t.indexMsg?i("ul",{class:{needLoop:t.indexMsg.list.length>10}},t._l(t.indexMsg.list,function(e,s){return i("li",{key:s},[i("span",[t._v("恭喜"+t._s(e.username))]),i("span",[t._v("获得"+t._s(e.prize_project)+t._s(e.prize_name))])])})):t._e()])])]),t._v(" "),i("div",{staticClass:"cvsPanel"},[i("div",{attrs:{id:"rstBox"}},[t.result?i("div",{staticClass:"rstStep2"},[t._v(t._s(t.result.prize_project))]):t._e(),t._v(" "),i("canvas",{attrs:{id:"mpCvs"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showStep1,expression:"showStep1"}],staticClass:"rstStep1"},[i("p",[t._v("您有"),i("span",[t._v(t._s(t.gameTime))]),t._v("次刮奖机会")]),t._v(" "),i("button",{on:{click:t.goGuaJiang}},[t._v("立即刮奖")])])])]),t._v(" "),i("div",{staticClass:"hdxq"},[i("h2",{staticClass:"h2Tit"},[t._v("活动详情")]),t._v(" "),i("div",{staticClass:"content-wrapper"},[t.rules?i("pre",{domProps:{innerHTML:t._s(t.rules.details)}}):t._e()])])])]),t._v(" "),t.rules?i("p",{staticClass:"copy",domProps:{innerHTML:t._s(t.rules.statement)}}):t._e()]):t._e(),t._v(" "),i("x-dialog",{staticClass:"public-dialog",model:{value:t.congratulation,callback:function(e){t.congratulation=e},expression:"congratulation"}},[t.result?i("div",{staticClass:"dialog-content"},[1!=t.result.prize_id?i("img",{staticClass:"title",attrs:{src:s("nsxJ"),alt:""}}):t._e(),t._v(" "),i("h1",{staticClass:"dialog-tit"},[t._v("\n                "+t._s(t.result.prize_name)+"\n            ")]),t._v(" "),i("div",{staticClass:"dialog-con"},[1!=t.result.prize_id?[t.result.prize_img?i("img",{attrs:{src:t.imgRequest+"/"+t.result.prize_img,alt:""}}):i("img",{attrs:{src:s("EsAx"),alt:""}})]:[i("img",{attrs:{src:s("CTaQ"),alt:""}})]],2),t._v(" "),i("button",{staticClass:"btn",on:{click:t.playAgain}},[t._v("再玩一次")])]):t._e()]),t._v(" "),t.ruleShow?i("div",{staticClass:"introduce"},[i("p",[i("img",{attrs:{src:s("KD/M"),alt:""},on:{click:t.ruleHide}})]),t._v(" "),i("tab",{attrs:{"line-width":3,"custom-bar-width":"100px","bar-active-color":"#FEC806","active-color":"#FEC806","default-color":"#fff"}},[i("tab-item",{attrs:{selected:""},on:{"on-item-click":t.tabChange}},[t._v("活动说明")]),t._v(" "),i("tab-item",{on:{"on-item-click":t.tabChange}},[t._v("我的奖品")])],1),t._v(" "),i("div",{staticClass:"temp"},[i("scroll",{ref:"scroll",attrs:{pullDownRefresh:!0,pullUpLoad:t.pullUpLoad,data:t.myAward},on:{pullingDown:t.pullingDown,pullingUp:t.pullingUp}},[t.introShow&&t.rules?i("flexbox",{staticClass:"item-container",attrs:{orient:"vertical"}},[i("flexbox-item",{attrs:{span:5}},[i("a",[t._v("活动时间")]),t._v(" "),i("p",[t._v(t._s(t.rules.time.start_time+" — "+t.rules.time.end_time))])]),t._v(" "),i("flexbox-item",{attrs:{span:5}},[i("a",[t._v("活动介绍")]),t._v(" "),i("p",{domProps:{innerHTML:t._s(t.rules.details)}})]),t._v(" "),i("flexbox-item",{staticClass:"rulesBox",attrs:{span:5}},[i("a",[t._v("活动规则")]),t._v(" "),i("p",[t._v("1.充值达"+t._s(t.rules.role.topup_money)+"元宝，获得"+t._s(t.rules.role.topup_num)+"次抽奖机会；")]),t._v(" "),i("p",[t._v("2.投注达"+t._s(t.rules.role.bet_money)+"元宝，获得"+t._s(t.rules.role.bet_num)+"次抽奖机会；")]),t._v(" "),i("p",[t._v("3.赢分达"+t._s(t.rules.role.win_money)+"元宝，获得"+t._s(t.rules.role.win_num)+"次抽奖机会；")]),t._v(" "),i("p",[t._v("4.输分达"+t._s(t.rules.role.lose_money)+"元宝，获得"+t._s(t.rules.role.lose_num)+"次抽奖机会；")]),t._v(" "),i("p",[t._v("5.充值投注赠送次数即时生效，输赢赠送次数每日12点结算，以上规则均在此次活动时间内生效。")])])],1):i("table",{staticClass:"item-container",attrs:{cellspacing:"0",cellspadding:"0","border-collapse":"collapse"}},[i("thead",[i("tr",[i("th",[t._v("时间")]),t._v(" "),i("th",[t._v("奖项")]),t._v(" "),i("th",[t._v("奖品名称")])])]),t._v(" "),i("tbody",[t.myAward&&t.myAward.length>0?t._l(t.myAward,function(e,s){return i("tr",{key:s},[i("td",[t._v(t._s(e.add_time))]),t._v(" "),i("td",[t._v(t._s(e.prize_project))]),t._v(" "),i("td",[t._v(t._s(e.prize_name))])])}):[i("tr",[i("td",{attrs:{colspan:"3"}},[t._v("没有奖品记录")])])]],2)])],1)],1)],1):t._e()],1)},staticRenderFns:[]};var p=s("vSla")(u,v,!1,function(t){s("2YY5"),s("tvqd")},"data-v-3a8eb3d9",null);e.default=p.exports},tvqd:function(t,e){}});
//# sourceMappingURL=21.ddc6dccd7e593620c96f.js.map