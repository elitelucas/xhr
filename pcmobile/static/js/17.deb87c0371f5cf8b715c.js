webpackJsonp([17],{"2Ttz":function(e,t){},GBnW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("4YfN"),a=n.n(i),s=n("9rMa"),o=n("PvbP"),r=(new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),o.a,a()({},Object(s.c)(["userInfo"])),{data:function(){return{pikerShow:!1,example:{img:"",autoCrop:!0,autoCropWidth:180,autoCropHeight:180,fixedBox:!0,size:.5},showCropper:!1,actFlag:!1,actMenus:{list1:'Select from phone album<input type="file" accept="image/*"  @change="inputImg"  ref="avater" class="inputFileAvatar" />',list2:"Select from system Avatar"}}},components:{Actionsheet:o.a},computed:a()({},Object(s.c)(["userInfo"])),created:function(){},methods:{actClick:function(e){var t=this;if("list1"==e)return console.log(document.querySelector(".inputFileAvatar")),void document.querySelector(".inputFileAvatar").addEventListener("change",function(e){t.inputImg(e)});"list2"!=e?console.log(e):this.$router.push({path:"/avaterPage"})},removeImg:function(){this.userInfo.avatar=""},inputImg:function(e){this.pikerShow=!1;var t=e.target.files||e.dataTransfer.files;t.length&&this.createImage(t[0])},createImage:function(e){if("undefined"==typeof FileReader)return this.$vux.alert.show({content:"Your browser does not support image upload, please upgrade your browser"}),!1;var t=this,n=new FileReader;if(e){if(!/\.(?:JPG|GIF|PNG|JPEG|BMP)$/i.test(e.name))return t.$vux.alert.show({content:"Only JPG, GIF, PNG, JPEG, BMP formats are supported"}),!1;if(e.size>4194304)return t.$vux.alert.show({content:"Failed to upload. Please upload a picture no larger than 4mÔºÅ"}),!1;n.readAsDataURL(e),n.onload=function(e){t._reviseAvatar(n.result.split(",")[1])}}},sexSelect:function(e,t){var n=this;n.value=!1,"menu1"==e||"menu2"==e&&(n.$refs.avater.focus=function(e){n.inputImg(e)})},_reviseAvatar:function(e){var t=this,n=this,i={};i.token=localStorage.getItem("token"),i.avatar=e,n.$vux.loading.show(),n.$http.post(n.urlRequest+"?m=api&c=user&a=saveAvatar",i).then(function(e){0==e.status&&(n.userInfo.avatar=e.avatar,t.$vux.toast.show({text:"Upload successful"})),n.$vux.loading.hide()}).catch(function(e){n.$vux.loading.hide(),t.$vux.toast.show({text:"Upload failed"}),console.log(e)})},goRouter:function(e){this.$router.push({path:e})}}}),c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"isHeader"},[i("div",{staticClass:"headerWrap"},[i("x-header",{staticClass:"header"},[e._v("personal information")])],1),e._v(" "),e.userInfo?i("group",{staticClass:"group-min-top"},[i("cell",{attrs:{title:"head portrait","is-link":""},nativeOn:{click:function(t){e.actFlag=!0}}},[i("div",{staticClass:"head-portrait"},[e.userInfo.avatar?i("img",{ref:"avatar",attrs:{src:e.imgRequest+e.userInfo.avatar},on:{error:e.removeImg}}):i("img",{attrs:{src:n("cuiQ")}})])]),e._v(" "),i("cell",{attrs:{title:"account number"}},[e._v(e._s(e.userInfo.username))]),e._v(" "),i("cell",{attrs:{title:"Nickname",link:"/personal/revisePage?type=nickname&nickname="+e.userInfo.nickname}},[e._v(e._s(e.userInfo.nickname?e.userInfo.nickname:"Not yet filled in"))]),e._v(" "),i("cell",{attrs:{title:" name of cardholder"}},[e._v(e._s(e.userInfo.realname))])],1):e._e(),e._v(" "),e.userInfo?i("group",{staticClass:"group-min-top"},[i("cell",{attrs:{title:"Line",link:"/personal/revisePage?type=weixin&weixin="+e.userInfo.weixin}},[e._v(e._s(e.userInfo.weixin?e.userInfo.weixin:"Not bound yet"))]),e._v(" "),i("cell",{staticClass:"email-cell",attrs:{title:"e-mail",link:"/personal/revisePage?type=email&email="+e.userInfo.email}},[e._v(e._s(e.userInfo.email?e.userInfo.email:"Not bound yet"))]),e._v(" "),i(),e._v(" "),i("cell",{attrs:{title:"phone"}},[e._v(e._s(e.userInfo.mobile))])],1):e._e(),e._v(" "),i("actionsheet",{staticClass:"my-actionsheet",attrs:{menus:e.actMenus,"show-cancel":""},on:{"on-click-menu":e.actClick},model:{value:e.actFlag,callback:function(t){e.actFlag=t},expression:"actFlag"}})],1)},staticRenderFns:[]};var l=n("vSla")(r,c,!1,function(e){n("Rhqo")},"data-v-fbf3b170",null);t.default=l.exports},PvbP:function(e,t,n){"use strict";var i=n("3cXf"),a=n.n(i),s=n("hRKE"),o=n.n(s),r=(Boolean,Boolean,String,String,Object,Array,Boolean,Boolean,{name:"actionsheet",mounted:function(){var e=this;this.hasHeaderSlot=!!this.$slots.header,this.$nextTick(function(){e.$tabbar=document.querySelector(".weui-tabbar"),e.$refs.iOSMenu&&e.$refs.iOSMenu.addEventListener("transitionend",e.onTransitionEnd)})},props:{value:Boolean,showCancel:Boolean,cancelText:String,theme:{type:String,default:"ios"},menus:{type:[Object,Array],default:function(){return{}}},closeOnClickingMask:{type:Boolean,default:!0},closeOnClickingMenu:{type:Boolean,default:!0}},data:function(){return{hasHeaderSlot:!1,show:!1}},methods:{onTransitionEnd:function(){this.$emit(this.show?"on-after-show":"on-after-hide")},onMenuClick:function(e,t){"string"==typeof e?this.emitEvent("on-click-menu",t,e):"disabled"!==e.type&&"info"!==e.type&&(e.value||0===e.value?this.emitEvent("on-click-menu",e.value,e):(this.emitEvent("on-click-menu","",e),this.show=!1))},onClickingMask:function(){this.$emit("on-click-mask"),this.closeOnClickingMask&&(this.show=!1)},emitEvent:function(e,t,n){if("on-click-menu"===e&&!/.noop/.test(t)){var i=n;"object"===(void 0===i?"undefined":o()(i))&&(i=JSON.parse(a()(i))),this.$emit(e,t,i),this.$emit(e+"-"+t),this.closeOnClickingMenu&&(this.show=!1)}},fixIos:function(e){this.$el.parentNode&&-1!==this.$el.parentNode.className.indexOf("v-transfer-dom")||this.$tabbar&&/iphone/i.test(navigator.userAgent)&&(this.$tabbar.style.zIndex=e)}},watch:{show:function(e){var t=this;this.$emit("input",e),e?this.fixIos(-1):setTimeout(function(){t.fixIos(100)},200)},value:{handler:function(e){this.show=e},immediate:!0}},beforeDestroy:function(){this.fixIos(100),this.$refs.iOSMenu&&this.$refs.iOSMenu.removeEventListener("transitionend",this.onTransitionEnd)}}),c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vux-actionsheet"},[n("transition",{attrs:{name:"vux-actionsheet-mask"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"weui-mask weui-mask_transparent",on:{click:e.onClickingMask}})]),e._v(" "),"android"===e.theme?n("div",{staticClass:"weui-skin_android"},[n("transition",{attrs:{name:"vux-android-actionsheet"},on:{"after-enter":function(t){e.$emit("on-after-show")},"after-leave":function(t){e.$emit("on-after-hide")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"weui-actionsheet"},[n("div",{staticClass:"weui-actionsheet__menu"},e._l(e.menus,function(t,i){return n("div",{staticClass:"weui-actionsheet__cell",domProps:{innerHTML:e._s(t.label||t)},on:{click:function(n){e.onMenuClick(t,i)}}})}))])])],1):n("div",{ref:"iOSMenu",staticClass:"weui-actionsheet",class:{"weui-actionsheet_toggle":e.show}},[n("div",{staticClass:"weui-actionsheet__menu"},[e.hasHeaderSlot?n("div",{staticClass:"weui-actionsheet__cell"},[e._t("header")],2):e._e(),e._v(" "),e._l(e.menus,function(t,i){return n("div",{staticClass:"weui-actionsheet__cell",class:"vux-actionsheet-menu-"+(t.type||"default"),domProps:{innerHTML:e._s(t.label||t)},on:{click:function(n){e.onMenuClick(t,i)}}})})],2),e._v(" "),e.showCancel?n("div",{staticClass:"weui-actionsheet__action",on:{click:function(t){e.emitEvent("on-click-menu","cancel")}}},[n("div",{staticClass:"weui-actionsheet__cell"},[e._v(e._s(e.cancelText||"cancel"))])]):e._e()])],1)},staticRenderFns:[]};var l=n("vSla")(r,c,!1,function(e){n("2Ttz")},null,null);t.a=l.exports},Rhqo:function(e,t){}});
//# sourceMappingURL=17.deb87c0371f5cf8b715c.js.map