webpackJsonp([36],{EBdD:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("j108"),i=e("inDh"),n=e("Hpey"),o=e("xQdF"),l=(s.a,i.a,n.a,{components:{Tab:s.a,TabItem:i.a},filters:{dateFormat:n.a},data:function(){return{showList:[],type:1,page:1,pullUpLoad:!0,msgDetailData:{}}},created:function(){this._getDataList()},methods:{activeCopy:function(t){Object(o.a)(t.target,"activeScroll"),document.addEventListener("touchmove",function(){Object(o.c)(t.target,"activeScroll")}),document.addEventListener("touchend",function(){Object(o.c)(t.target,"activeScroll")})},pullingDown:function(){this.page=1,this._getDataList()},pullingUp:function(){this.pullUpLoadFlag?this.$refs.scroll.forceUpdate(!1):(this.page+=1,this._getDataList())},_getDataList:function(t){var a=this;a.pullUpLoadFlag=!1,t&&(a.$refs.scroll&&a.$refs.scroll.scrollTo(0,0),a.type=t,a.page=1);var e={};e.token=localStorage.getItem("token"),e.type=a.type,e.page=a.page,a.$http.post(a.urlRequest+"?m=api&c=message&a=dataList",e).then(function(t){0==t.status&&(1==a.page?a.showList=t.list:a.showList=a.showList.concat(t.list),a.page==Number(t.pageSum)&&(a.pullUpLoadFlag=!0)),a.$vux.loading.hide()}).catch(function(t){a.$vux.loading.hide(),console.log(t)})},msgDetail:function(t,a,e){var s=this,i={};i.token=localStorage.getItem("token"),i.type=t,i.id=a,s.$vux.loading.show(),s.$http.post(s.urlRequest+"?m=api&c=message&a=detail",i).then(function(i){if(s.$vux.loading.hide(),0==i.status&&(s.msgDetailData=i.list,s.msgDetailData.title)){s.$router.push("/msgCenter/dataDetail?type="+t+"&id="+a);var n={};(n=s.showList[e]).has_read=1,s.$set(s.showList,e,n)}}).catch(function(t){s.$vux.loading.hide(),console.log(t)})}},watch:{},activated:function(){},deactivated:function(){}}),c={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"headerWrap"},[s("x-header",{staticClass:"header",attrs:{title:"information","left-options":{showBack:!0}}})],1),t._v(" "),s("div",{staticClass:"temp"},[s("Tab",{attrs:{"bar-active-color":"#C13C1E","active-color":"#C13C1E"}},[s("TabItem",{attrs:{selected:""},on:{"on-item-click":function(a){t._getDataList(1)}}},[t._v("Platform notic")]),t._v(" "),s("TabItem",{on:{"on-item-click":function(a){t._getDataList(2)}}},[t._v("site info")])],1),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"contenInner"},[t.showList.length>0?[s("scroll",{ref:"scroll",attrs:{pullDownRefresh:!0,pullUpLoad:t.pullUpLoad,data:t.showList},on:{pullingDown:t.pullingDown,pullingUp:t.pullingUp}},[s("div",[s("ul",{staticClass:"topHeadFl"},t._l(t.showList,function(a,e){return s("li",{key:e,staticClass:"vux-1px-b",on:{touchstart:function(a){t.activeCopy(a)},click:function(s){t.msgDetail(t.type,a.id,e)}}},[s("h4",{staticClass:"pointEvents"},[a.has_read?t._e():s("i"),t._v(" "),s("span",[t._v(t._s(a.title))]),t._v(" "),s("em",[t._v(t._s(t._f("dateFormat")(1e3*a.addtime)))])]),t._v(" "),s("p",{staticClass:"pointEvents"},[t._v(t._s(a.content))])])}))])])]:[s("img",{staticClass:"noDataImg",attrs:{src:e("w+73"),alt:""}})]],2)])],1),t._v(" "),s("transition",{attrs:{name:"slide"}},[s("router-view",{attrs:{msgDetailData:t.msgDetailData}})],1)],1)},staticRenderFns:[]};var r=e("vSla")(l,c,!1,function(t){e("rPGx")},"data-v-7d9177c2",null);a.default=r.exports},rPGx:function(t,a){}});
//# sourceMappingURL=36.ba9b9e7933ecc93a3e9b.js.map