webpackJsonp([58],{"+RLT":function(t,e){},"1Nik":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{allGainList:[],page:1,pullUpLoad:!0,pullDownRefresh:!0,pullTxt:"松开立即加载更多",loadingHttp:!1}},created:function(){this.redpacketId=this.$route.query.redpacketId,this._getRedDetails()},mounted:function(){},methods:{removePic:function(){this.gainRedpacket.redpacket_pic=""},removeImg:function(t){this.allGainList[t].user_pic=""},_getRedDetails:function(){var t=this,e={token:localStorage.getItem("token"),redpacket_id:this.redpacketId};this.$vux.loading.show(),this.$http.post(this.urlRequest+"?m=api&c=redpacket&a=gainRedpacket",e).then(function(e){t.$vux.loading.hide(),0==e.status?(t.loadingHttp=!0,t.gainRedpacket=e,t.allGainList=e.all_gain_list,console.log(t.allGainList)):e.ret_msg&&""!=e.ret_msg&&t.$vux.toast.show({text:e.ret_msg})}).catch(function(e){t.$vux.loading.hide(),t.$vux.toast.show({text:"Data request timed out"})})},_getRedDetailsMore:function(t){var e=this,a={token:localStorage.getItem("token"),redpacket_id:this.redpacketId,page:this.page};t&&this.$vux.loading.show(),this.$http.post(this.urlRequest+"?m=api&c=redpacket&a=currentRedpacketList",a).then(function(a){t&&e.$vux.loading.hide(),0==a.status?(1==e.page?e.allGainList=a.gain_list:e.allGainList=e.allGainList.concat(a.gain_list),a.gain_list.length<10&&(e.pullUpLoadFalg=!0)):a.ret_msg&&""!=a.ret_msg&&e.$vux.toast.show({text:a.ret_msg})}).catch(function(t){e.$refs.scroll.forceUpdate(!1),e.pullUpLoad=!1,e.$vux.loading.hide(),e.$vux.toast.show({text:"Data request timed out"})})},pullingDown:function(){this.page=1,this._getRedDetailsMore(0)},pullingUp:function(){return!!this.allGainList&&(this.pullUpLoadFalg?(this.$refs.scroll.forceUpdate(!1),!1):(this.page+=1,void this._getRedDetailsMore(0)))}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"isHeader red-wrap red-opened"},[i("div",{staticClass:"headerWrap"},[i("x-header",{staticClass:"header"},[t._v("红包"),i("router-link",{attrs:{slot:"right",to:{path:"/redPacket/rule",query:{redpacketId:t.redpacketId}}},slot:"right"},[t._v("活动规则")])],1)],1),t._v(" "),t.loadingHttp?i("scroll",{ref:"scroll",attrs:{data:t.allGainList,pullUpLoad:t.pullUpLoad,pullDownRefresh:t.pullDownRefresh},on:{pullingDown:t.pullingDown,pullingUp:t.pullingUp}},[i("div",{staticClass:"red-top"},[i("div",{staticClass:"red-info"},[i("div",{staticClass:"red-avartar"},[t.gainRedpacket.redpacket_pic?i("img",{attrs:{src:t.imgRequest+t.gainRedpacket.redpacket_pic,alt:""},on:{error:t.removePic}}):i("img",{attrs:{src:a("cuiQ")}})]),t._v(" "),i("p",[t._v(t._s(t.gainRedpacket.redpacket_title)),1==t.gainRedpacket.is_best_lucky?i("span",{staticClass:"best-luck"},[i("i",{staticClass:"icon icon-luck"}),t._v("手气最佳")]):t._e()]),t._v(" "),t.gainRedpacket.self_gain_money?i("div",{staticClass:"money-info"},[i("h4",[t._v(t._s(t.gainRedpacket.self_gain_money))]),t._v(" "),i("p",{staticClass:"red-text-blue"},[t._v("已存入余额，可直接消费")])]):i("h4",{staticClass:"finished"},[t._v("手速太慢，红包已全部发完")])]),t._v(" "),i("div",{staticClass:"red-winner"},t._l(t.allGainList,function(e,s){return i("dl",{key:s},[i("dt",[e.user_pic?i("img",{attrs:{src:t.imgRequest+e.user_pic},on:{error:function(e){t.removeImg(s)}}}):i("img",{attrs:{src:a("cuiQ")}})]),t._v(" "),i("dd",[i("p",[t._v(t._s(e.username))]),t._v(" "),i("p",[t._v(t._s(e.user_gain_date))]),t._v(" "),i("span",{staticClass:"red-money"},[t._v(t._s(e.user_gain_money))])])])}))])]):t._e()],1)},staticRenderFns:[]};var n=a("vSla")(i,s,!1,function(t){a("+RLT")},"data-v-274a9b10",null);e.default=n.exports}});
//# sourceMappingURL=58.eabcbf4fe82e68f4409d.js.map