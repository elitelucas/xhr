webpackJsonp([39],{"8Dz3":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Hpey"),a=i("J8qA"),n=i("xQdF"),l=(a.a,{components:{dataTimeFilter:a.a},data:function(){return{showList:[],nowId:"",recordList:[],dealTypeIdList:[],dealType:"",dealTypeId:"",status:"",statusId:"",type:"",english:[{"充值":"Deposit","提现":"Withdraw","返水":"Rebate","返利":"Rebate","投注":"Bet","其他":"Other","平台任务奖励":"Task reward","会员额度调整":"Member quota adjustment","处理中":"Processing","已完成":"Completed",}],statusList:[{id:0,name:"All States"},{id:1,name:"Processing"},{id:2,name:"Completed"}],pikerShow:!1,pickerTitle:"Color type",datePicker:!1,beginTime:Object(s.a)(new Date,"YYYY-MM-DD"),endTime:Object(s.a)(new Date,"YYYY-MM-DD"),page:1,upOne:!1,upTwo:!1,single_money:[],total_money:null}},created:function(){this.getBills()},methods:{activeCopy:function(t){Object(n.a)(t.target,"activeScroll"),document.addEventListener("touchmove",function(){Object(n.c)(t.target,"activeScroll")}),document.addEventListener("touchend",function(){Object(n.c)(t.target,"activeScroll")})},showDetail:function(t,e,i,s){0!=t&&this.$router.push("/recordDetail?type="+e+"&order_no="+i+"&name="+s)},pullingDown:function(){this.page=1,this.getBills(1)},pullingUp:function(){this.pullUpLoadFlag?this.$refs.scroll.forceUpdate(!1):(this.page+=1,this.getBills(1))},filterList:function(t){for(var r=0;r<t.length;r++){t[r]['name']=this.english[0][t[r]['name']];} return t;},resetAll:function(t){var e=this;e.dealType=e.dealTypeIdList[0],e.status=e.statusList[0],e.dealTypeId=e.dealTypeIdList[0].id,e.statusId=e.statusList[0].id,e.beginTime=Object(s.a)(new Date,"YYYY-MM-DD"),e.endTime=Object(s.a)(new Date,"YYYY-MM-DD"),e.page=1,t||e.getBills()},showPicker:function(t,e){this.type=t,0==t?(this.showList=this.dealTypeIdList,this.pickerTitle="Transaction type",this.upOne=!0):1==t&&(this.showList=this.statusList,this.pickerTitle="Transaction status",this.upTwo=!0),this.pikerShow=!0,this.nowId=e},getBills:function(t){var e=this;e.pullUpLoadFlag=!1,1!=t&&e.$vux.loading.show();var i={};i.token=localStorage.getItem("token"),i.start_time=e.beginTime,i.end_time=e.endTime,i.status=e.statusId,i.type=e.dealTypeId,i.page=e.page,e.$route.query.user_id&&(i.user_id=e.$route.query.user_id,i.source=2),e.$http.post(e.urlRequest+"?m=api&c=account&a=getBills",i).then(function(t){0==t.status&&(e.total_money=t.total_money,e.single_money=t.single_money||[],0==e.dealTypeIdList.length&&(e.dealTypeIdList=t.trantype,e.dealTypeIdList=e.filterList(e.dealTypeIdList),e.dealTypeIdList=e.dealTypeIdList.map(function(t,e){return 0==e?{name:"All types",id:t.id}:t}),e.resetAll("reset")),1==e.page?e.recordList=t.list:e.recordList=e.recordList.concat(t.list),t.list.length<20&&(e.pullUpLoadFlag=!0)),e.$vux.loading.hide()}).catch(function(t){e.$vux.loading.hide(),console.log(t)})},pickHide:function(t){this.datePicker=t},getTime:function(t){new Date(t[0]),new Date(t[1]);this.beginTime=t[0],this.endTime=t[1],this.datePicker=!1,this.page=1,this.getBills()},picking:function(t,e){var i=this;0==this.type?(this.dealTypeId=e,this.dealType=this.dealTypeIdList.find(function(t){return t.id==e})):1==this.type&&(this.statusId=e,this.status=this.statusList.find(function(t){return t.id==e})),this.nowId=e,this.page=1,this.getBills();setTimeout(function(){i.pikerShow=!1},200)}},watch:{pikerShow:function(){0==this.pikerShow&&(this.upOne=!1,this.upTwo=!1)},$route:function(t,e){"RecordDetail"!=e.name&&"DealRecord"==t.name&&(this.recordList=[],this.resetAll(0))}},activated:function(){},deactivated:function(){}}),o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"headerWrap"},[s("x-header",{staticClass:"header",attrs:{"left-options":{showBack:!0}}},[t._v("Transaction recordsn "),s("a",{attrs:{slot:"right"},on:{click:function(e){t.resetAll(0)}},slot:"right"},[t._v("Reset")])])],1),t._v(" "),s("flexbox",{staticClass:"headFilter",attrs:{gutter:0}},[s("flexbox-item",{staticClass:"item-type",class:{active:t.upOne},attrs:{span:4},nativeOn:{click:function(e){t.showPicker(0,t.dealType.id)}}},[s("span",{staticClass:"item-title"},[t._v(t._s(t.dealType.name))]),t._v(" "),s("i",{staticClass:"item-icon triangle",staticStyle:{"pointer-events":"none"}},[s("img",{staticClass:"down",attrs:{src:i("sUte")}}),t._v(" "),s("img",{staticClass:"up",attrs:{src:i("mrzh")}})])]),t._v(" "),s("flexbox-item",{staticClass:"item-type",class:{active:t.upTwo},attrs:{span:4},nativeOn:{click:function(e){t.showPicker(1,t.status.id)}}},[s("span",{staticClass:"item-title"},[t._v(t._s(t.status.name))]),t._v(" "),s("i",{staticClass:"item-icon triangle",staticStyle:{"pointer-events":"none"}},[s("img",{staticClass:"down",attrs:{src:i("sUte")}}),t._v(" "),s("img",{staticClass:"up",attrs:{src:i("mrzh")}})])]),t._v(" "),s("flexbox-item",{staticClass:"item-type",attrs:{span:4},nativeOn:{click:function(e){t.datePicker=!0}}},[s("span",{staticClass:"item-title"},[t._v("Time filtering")]),t._v(" "),s("i",{staticClass:"item-icon"},[s("img",{attrs:{src:i("4/iK")}})])])],1),t._v(" "),s("div",{staticClass:"trading-hour"},[""==t.beginTime&&""==t.endTime?[s("span",[t._v("all")])]:[s("span",[t._v(t._s(t.beginTime))]),t._v(" "),s("span",[t._v("to")]),t._v(" "),s("span",[t._v(t._s(t.endTime))])]],2),t._v(" "),s("div",{staticClass:"item-list-wrapper",class:{tempBottom:t.single_money.length>0}},[t.recordList.length>0?[s("scroll",{ref:"scroll",attrs:{pullDownRefresh:!0,pullUpLoad:!0,data:t.recordList},on:{pullingDown:t.pullingDown,pullingUp:t.pullingUp}},[s("div",t._l(t.recordList,function(e,i){return s("flexbox",{key:i,staticClass:"item-list",class:{activeBox:e.is_show_detail},attrs:{gutter:0},nativeOn:{click:function(i){t.showDetail(e.is_show_detail,e.type,e.order_no,e.name)}}},[s("flexbox-item",{attrs:{span:8}},[s("h3",[t._v(t._s(t.english[0][e.name])),e.pay_type?s("span",[t._v("type："+t._s(e.pay_type))]):t._e(),e.issue?s("span",[t._v("issue："+t._s(e.issue))]):t._e()]),t._v(" "),s("p",[t._v(t._s(e.addtime))])]),t._v(" "),s("flexbox-item",{staticClass:"text-right",attrs:{span:4}},[s("h3",{class:1==e.money_type?"text-green":"text-red"},[t._v(t._s(1==e.money_type?"+":"-")+t._s(e.money))]),t._v(" "),s("p",[t._v("state："+t._s(t.english[0][e.status]))])])],1)}))])]:[s("img",{staticClass:"noDataImg",attrs:{src:i("w+73"),alt:""}})]],2),t._v(" "),t.single_money.length>0?s("div",{staticClass:"footer-scroll"},[s("scroll",{attrs:{freeScroll:!0,eventPassthrough:"vertical",data:t.single_money}},[s("div",{staticClass:"footerInner"},[t.total_money?s("span",[t._v("Total amount : "),s("span",{staticClass:"greenBox"},[t._v(t._s(1==t.total_money.money_type?"+":"-")+t._s(t.total_money.money))])]):t._e(),t._v(" "),t._l(t.single_money,function(e,i){return s("span",{key:i},[t._v("n "+t._s(e.name)+" : "+t._s(e.money)+"n ")])})],2)])],1):t._e(),t._v(" "),s("transition",{attrs:{name:"picker"}},[t.pikerShow?s("div",{staticClass:"picker",on:{click:function(e){if(e.target!==e.currentTarget)return null;t.pikerShow=!1}}},[t.pikerShow?s("div",{staticClass:"innerBox"},[s("h4",{staticClass:"vux-1px-b"},[t._v("Select "+t._s(t.pickerTitle))]),t._v(" "),t.showList&&t.showList.length>=1?s("div",{staticClass:"picker-list clearfix"},t._l(t.showList,function(e,i){return s("div",{key:i},[s("button",{class:{cur:e.id==t.nowId},attrs:{"data-id":e.id},on:{click:function(i){t.picking(i,e.id)}}},[t._v(t._s(e.name))])])})):t._e(),t._v(" "),s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.pikerShow=!1}}},[t._v("cancel")])]):t._e()]):t._e()]),t._v(" "),s("dataTimeFilter",{attrs:{endTime:t.endTime,beginTime:t.beginTime,datePicker:t.datePicker},on:{getTime:t.getTime,pickHide:t.pickHide}})],1)},staticRenderFns:[]};var c=i("vSla")(l,o,!1,function(t){i("wzVF")},"data-v-707747d6",null);e.default=c.exports},wzVF:function(t,e){}});