<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <link rel="stylesheet" href="statics/admin/css/pintuer.css">
        <link rel="stylesheet" href="statics/admin/css/admin.css">
        <link rel="stylesheet" href="statics/admin/css/datePicker.css">
        <script src="statics/admin/js/jquery.js"></script>
        <!-- <script src="statics/admin/js/jquery.min.js" type="text/javascript"></script> -->
        <script src="statics/admin/js/pintuer.js"></script>  
        <script src="statics/admin/js/layer/2.1/layer.js"></script>  
        <script src="statics/admin/js/jquery.date_input.pack.js"></script> 
        {template public-new-ui-header}
        <style>
        div.rule_setting{
            margin-left: 5%;
        }
        .rule_setting input.form-control{
            width:100px;
            display:inline-block;
            margin-top: 6px;
        }
        </style>
    </head>
    <body class="new_ui_body">
        <div class="row">
            <div class="col-sm-12">
                <div class="ibox float-e-margins">
                    <div class="ibox-title iboxWTitle">
                        <h5>赔率规则 </h5>
                        <div class="ibox-tools"> </div>
                    </div>
                    <div class="ibox-content bagCol" style="width: 100%;">

                        <div class="ibox-title">
                            <h5>房间切换 </h5>
                            <div class="ibox-tools"></div>
                        </div>
                        <div class="ibox-content m-b" style="width: 100%;">
                            <div class="row">
                                <div class="col-sm-3 rule_setting">
                                    <div class="input-group"><span class="input-group-addon">选择房间</span>
                                        <select name="room_id" class="input form-control" id='room_id' style="display:inline-block">
                                            {loop $roomList $v}
                                            <option {if $v['id'] == $room_id} selected {/if} value="{$v['id']}">{$v['lottery_title']}--{$v['title']}</option>
                                            {/loop}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <form method="" class="form-x" action="" id="form">
                            <div class="ibox-title">
                                <h5>大小单双</h5>
                            </div>
                            <div class="ibox-content m-b" style="width: 100%;">
                                <div class="row">
                                    <div class="form-group">
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status1" name="status1" {if $list['1'][0]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['1'][0]['point']}" class="input val form-control" id="point1">
                                            时，13、14
                                            <input type="text" value="{$list['1'][0]['ratio']}" class="input val form-control" id="ratio1">
                                            倍
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status2" name="status2" {if $list['1'][1]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['1'][1]['point']}" class="input val form-control" id="point2">
                                            时，13、14
                                            <input type="text" value="{$list['1'][1]['ratio']}" class="input val form-control" id="ratio2">
                                            倍    
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status3" name="status3" {if $list['1'][2]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['1'][2]['point']}" class="input val form-control" id="point3">
                                            时，13、14
                                            <input type="text" value="{$list['1'][2]['ratio']}" class="input val form-control" id="ratio3">
                                            倍  
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status4" name="status4" {if $list['1'][3]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['1'][3]['point']}" class="input val form-control" id="point4">
                                            时，13、14
                                            <input type="text" value="{$list['1'][3]['ratio']}" class="input val form-control" id="ratio4">
                                            倍   
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-8 col-sm-offset-1">
                                            <button id="btn_submit" onclick="submit1()" class="btn btn-primary" type="button"> 保存</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--  -->
                            <!-- <div class="ibox-title">
                                <h5>大单小双</h5>
                            </div>
                            <div class="ibox-content m-b" style="width: 100%;">
                                <div class="row">
                                    <div class="form-group">
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status5" name="status5" {if $list['2'][0]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['2'][0]['point']}" class="input val form-control" id="point5">
                                            时，13、14
                                            <input type="text" value="{$list['2'][0]['ratio']}" class="input val form-control" id="ratio5">
                                            倍
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status6" name="status6" {if $list['2'][1]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['2'][1]['point']}" class="input val form-control" id="point6">
                                            时，13、14
                                            <input type="text" value="{$list['2'][1]['ratio']}" class="input val form-control" id="ratio6">
                                            倍    
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status7" name="status7" {if $list['2'][2]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['2'][2]['point']}" class="input val form-control" id="point7">
                                            时，13、14
                                            <input type="text" value="{$list['2'][2]['ratio']}" class="input val form-control" id="ratio7">
                                            倍  
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status8" name="status8" {if $list['2'][3]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['2'][3]['point']}" class="input val form-control" id="point8">
                                            时，13、14
                                            <input type="text" value="{$list['2'][3]['ratio']}" class="input val form-control" id="ratio8">
                                            倍   
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-8 col-sm-offset-1">
                                            <button id="btn_submit" onclick="submit2()" class="btn btn-primary" type="button"> 保存</button>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                            <!--  -->
                            <div class="ibox-title">
                                <h5>小单大双</h5>
                            </div>
                            <div class="ibox-content m-b" style="width: 100%;">
                                <div class="row">
                                    <div class="form-group">
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status9" name="status9" {if $list['3'][0]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['3'][0]['point']}" class="input val form-control" id="point9">
                                            时，13、14
                                            <input type="text" value="{$list['3'][0]['ratio']}" class="input val form-control" id="ratio9">
                                            倍
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status10" name="status10" {if $list['3'][1]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['3'][1]['point']}" class="input val form-control" id="point10">
                                            时，13、14
                                            <input type="text" value="{$list['3'][1]['ratio']}" class="input val form-control" id="ratio10">
                                            倍    
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status11" name="status11" {if $list['3'][2]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['3'][2]['point']}" class="input val form-control" id="point11">
                                            时，13、14
                                            <input type="text" value="{$list['3'][2]['ratio']}" class="input val form-control" id="ratio11">
                                            倍  
                                        </div>
                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status12" name="status12" {if $list['3'][3]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                             > 
                                            <input type="text" value="{$list['3'][3]['point']}" class="input val form-control" id="point12">
                                            时，13、14
                                            <input type="text" value="{$list['3'][3]['ratio']}" class="input val form-control" id="ratio12">
                                            倍   
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-8 col-sm-offset-1">
                                            <button id="btn_submit" onclick="submit3()" class="btn btn-primary" type="button"> 保存</button>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            {loop array(4,5,6,7,8,9) $v}
                            <div class="ibox-title">
                                <h5>{$exData[$v]}</h5>
                            </div>
                            <div class="ibox-content m-b" style="width: 100%;">
                                <div class="row" id="teet{$v}">
                                    <div class="form-group" >
                                        {loop array(0,1,2,3) $vv}

                                        <div class="col-sm-8 rule_setting">
                                            <label class="checkbox-inline">
                                                <input type="checkbox" id="status<?php echo $v+$vv+13 ?>" name="status<?php echo $v+$vv+13 ?>" {if $list[$v][$vv]['status'] == 1}checked{/if}/> 总注
                                            </label>
                                            >
                                            <input type="text" name="input1" value="{$list[$v][$vv]['point']}" class="input val form-control" id="point<?php echo $v+$vv+13 ?>">
                                            时，
                                            <input type="text" name="input2" value="{$list[$v][$vv]['ratio']}" class="input val form-control" id="ratio<?php echo $v+$vv+13 ?>">
                                            倍
                                        </div>

                                        {/loop}

                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-8 col-sm-offset-1">
                                            <button id="btn_submit" onclick="submitex({$v})" class="btn btn-primary" type="button"> 保存</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/loop}


                        </form>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            var loading = "";//加载中......

            //保存组合数据   -  2
            function submitex(type) {
                var data = {};
                var room_id = $("#room_id").val();
                data.room_id = room_id;
                data.type = type;
                var id = $("#teet"+ type);


                id.find(".rule_setting").each(function (i) {
//                    var status=0;
                    var checkbox = $(this).find("input[type=checkbox]");
                    data['point'+(i+1)] = $(this).find("input[name=input1]").val();
                    data['ratio'+(i+1)] = $(this).find("input[name=input2]").val();
                    if(checkbox.is(':checked') == true){
                        data['status'+(i+1)] = 1;
                    }else{
                        data['status'+(i+1)] = 0;
                    }
                });

                console.log(data,'data');

                $.ajax({
                    url: '?m=admin&c=odds&a=upRule',
                    data: data,
                    dataType: 'json',
                    type: 'post',
                    beforeSend: function () {
                        loading = layer.load(1);
                    },
                    error: function () {
                        layer.close(loading);
                        layer.msg('网络异常，稍后再试！！！', {icon: 5, shade: [0.5, '#393D49']});
                    },
                    success: function (result) {
                        layer.close(loading);
                        if (result.rt) {
                            layer.msg('操作成功！！！', {icon: 6, shade: [0.5, '#393D49']}, function () {
                                location.reload();
                            });
                        } else {
                            layer.msg('操作失败！！！', {icon: 5, shade: [0.5, '#393D49']});
                        }
                    }
                });
            }



            
            //保存大小单双  - 1
            function submit1() {
                var room_id = $("#room_id").val();
                var point1 = $("#point1").val();
                var point2 = $("#point2").val();
                var point3 = $("#point3").val();
                var point4 = $("#point4").val();
                var ratio1 = $("#ratio1").val();
                var ratio2 = $("#ratio2").val();
                var ratio3 = $("#ratio3").val();
                var ratio4 = $("#ratio4").val();
                var status1 = $('#status1').is(':checked') == true ? 1 : 0;
                var status2 = $('#status2').is(':checked') == true ? 1 : 0;
                var status3 = $('#status3').is(':checked') == true ? 1 : 0;
                var status4 = $('#status4').is(':checked') == true ? 1 : 0;
                var type = "1";

                $.ajax({
                    url: '?m=admin&c=odds&a=upRule',
                    data: {room_id: room_id, type: type, point1:point1,point2:point2,point3:point3,point4:point4,ratio1:ratio1,ratio2:ratio2,ratio3:ratio3,ratio4:ratio4,status1:status1,status2:status2,status3:status3,status4:status4},
                    dataType: 'json',
                    type: 'post',
                    beforeSend: function () {
                        loading = layer.load(1);
                    },
                    error: function () {
                        layer.close(loading);
                        layer.msg('网络异常，稍后再试！！！', {icon: 5, shade: [0.5, '#393D49']});
                    },
                    success: function (result) {
                        layer.close(loading);

                        if (result.rt) {
                            layer.msg('操作成功！！！', {icon: 6, shade: [0.5, '#393D49']}, function () {
                                location.reload();
                            });
                        } else {
                            layer.msg(result.msg, {icon: 5, shade: [0.5, '#393D49']});
                        }
                    }
                });
            }

            //保存组合数据   -  2
            function submit2() {
                var room_id = $("#room_id").val();
                var point1 = $("#point5").val();
                var point2 = $("#point6").val();
                var point3 = $("#point7").val();
                var point4 = $("#point8").val();
                var ratio1 = $("#ratio5").val();
                var ratio2 = $("#ratio6").val();
                var ratio3 = $("#ratio7").val();
                var ratio4 = $("#ratio8").val();
                var status1 = $('#status5').is(':checked') == true ? 1 : 0;
                var status2 = $('#status6').is(':checked') == true ? 1 : 0;
                var status3 = $('#status7').is(':checked') == true ? 1 : 0;
                var status4 = $('#status8').is(':checked') == true ? 1 : 0;
                var type = "2";

                $.ajax({
                    url: '?m=admin&c=odds&a=upRule',
                    data: {room_id: room_id, type: type, point1:point1,point2:point2,point3:point3,point4:point4,ratio1:ratio1,ratio2:ratio2,ratio3:ratio3,ratio4:ratio4,status1:status1,status2:status2,status3:status3,status4:status4},
                    dataType: 'json',
                    type: 'post',
                    beforeSend: function () {
                        loading = layer.load(1);
                    },
                    error: function () {
                        layer.close(loading);
                        layer.msg('网络异常，稍后再试！！！', {icon: 5, shade: [0.5, '#393D49']});
                    },
                    success: function (result) {
                        layer.close(loading);
                        if (result.rt) {
                            layer.msg('操作成功！！！', {icon: 6, shade: [0.5, '#393D49']}, function () {
                                location.reload();
                            });
                        } else {
                            layer.msg('操作失败！！！', {icon: 5, shade: [0.5, '#393D49']});
                        }
                    }
                });
            }
            
            //保存组合数据   -  2
            function submit3() {
                var room_id = $("#room_id").val();
                var point1 = $("#point9").val();
                var point2 = $("#point10").val();
                var point3 = $("#point11").val();
                var point4 = $("#point12").val();
                var ratio1 = $("#ratio9").val();
                var ratio2 = $("#ratio10").val();
                var ratio3 = $("#ratio11").val();
                var ratio4 = $("#ratio12").val();
                var status1 = $('#status9').is(':checked') == true ? 1 : 0;
                var status2 = $('#status10').is(':checked') == true ? 1 : 0;
                var status3 = $('#status11').is(':checked') == true ? 1 : 0;
                var status4 = $('#status12').is(':checked') == true ? 1 : 0;
                var type = "3";

                $.ajax({
                    url: '?m=admin&c=odds&a=upRule',
                    data: {room_id: room_id, type: type, point1:point1,point2:point2,point3:point3,point4:point4,ratio1:ratio1,ratio2:ratio2,ratio3:ratio3,ratio4:ratio4,status1:status1,status2:status2,status3:status3,status4:status4},
                    dataType: 'json',
                    type: 'post',
                    beforeSend: function () {
                        loading = layer.load(1);
                    },
                    error: function () {
                        layer.close(loading);
                        layer.msg('网络异常，稍后再试！！！', {icon: 5, shade: [0.5, '#393D49']});
                    },
                    success: function (result) {
                        layer.close(loading);
                        if (result.rt) {
                            layer.msg('操作成功！！！', {icon: 6, shade: [0.5, '#393D49']}, function () {
                                location.reload();
                            });
                        } else {
                            layer.msg('操作失败！！！', {icon: 5, shade: [0.5, '#393D49']});
                        }
                    }
                });
            }
            
            $(function(){
                var room_id = "{$room_id}";
                $("#room_id option[value='" + room_id + "']").attr("selected", true);
                
                $("#room_id").change(function(){
                    var val = $(this).val();
                    location.href = "?m=admin&c=odds&a=rule" + "&room_id=" + val;
                });
            });
        </script>
    </body>
</html>