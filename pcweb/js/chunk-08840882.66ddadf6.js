(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08840882"],{"02d8":function(e,r,t){"use strict";t("cc59")},4917:function(e,r,t){"use strict";var i=t("cb7c"),s=t("9def"),n=t("0390"),a=t("5f1b");t("214f")("match",1,(function(e,r,t,o){return[function(t){var i=e(this),s=void 0==t?void 0:t[r];return void 0!==s?s.call(t,i):new RegExp(t)[r](String(i))},function(e){var r=o(t,e,this);if(r.done)return r.value;var l=i(e),c=String(this);if(!l.global)return a(l,c);var u=l.unicode;l.lastIndex=0;var f,g=[],d=0;while(null!==(f=a(l,c))){var p=String(f[0]);g[d]=p,""===p&&(l.lastIndex=n(c,s(l.lastIndex),u)),d++}return 0===d?null:g}]}))},"54f4":function(e,r,t){"use strict";t.r(r);var i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.VueTitle,expression:"VueTitle"}]},[t("nav",{staticClass:"box clearfix"},[t("div",{staticClass:"w-1200 clearfix"},[t("div",{staticClass:"left-cont clearfix fl"},[t("router-link",{staticClass:"logo-box",attrs:{to:"/home"}},[e.platformConfig&&e.platformConfig.pc_logo?t("img",{attrs:{src:e.imgRequest+e.platformConfig.pc_logo,alt:""}}):e._e()])],1)])]),t("div",{staticClass:"main-content-wrap reg-main-bg clearfix"},[t("div",{staticClass:"w-1200 reg-wrap clearfix"},[t("div",{staticClass:"reg-title"},[t("h2",[e._v(e._s(e.english.注册))])]),t("div",{staticClass:"reg-content"},[e.loading?t("Spin",{attrs:{fix:"",size:"large"}}):e._e(),t("Form",{ref:"registerInfo",attrs:{model:e.registerInfo,rules:e.registerrule,"label-width":120,"label-position":"right"}},[t("FormItem",{attrs:{label:e.english.账号,prop:"userName"}},[t("Input",{ref:"username",attrs:{maxlength:15,placeholder:e.english.账号占位符},model:{value:e.registerInfo.userName,callback:function(r){e.$set(e.registerInfo,"userName",r)},expression:"registerInfo.userName"}})],1),t("FormItem",{attrs:{label:e.english.密码,prop:"psd"}},[t("Input",{attrs:{maxlength:15,type:"password",placeholder:e.english.密码占位符},model:{value:e.registerInfo.psd,callback:function(r){e.$set(e.registerInfo,"psd",r)},expression:"registerInfo.psd"}})],1),t("FormItem",{attrs:{label:e.english.确认+" "+e.english.密码,prop:"confirmPsd"}},[t("Input",{attrs:{maxlength:15,type:"password",placeholder:e.english.确认密码占位符},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.registerNow("registerInfo")}},model:{value:e.registerInfo.confirmPsd,callback:function(r){e.$set(e.registerInfo,"confirmPsd",r)},expression:"registerInfo.confirmPsd"}})],1),e.OptionalItems.email?t("FormItem",{attrs:{label:e.english.邮箱,prop:"email"}},[t("Input",{ref:"email",attrs:{placeholder:e.english.邮箱占位符},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.registerNow("registerInfo")}},model:{value:e.registerInfo.email,callback:function(r){e.$set(e.registerInfo,"email",r)},expression:"registerInfo.email"}})],1):e._e(),e.OptionalItems.realname?t("FormItem",{attrs:{label:e.english.真实姓名,prop:"realname"}},[t("Input",{attrs:{type:"text",placeholder:e.english.真实姓名占位符},model:{value:e.registerInfo.realname,callback:function(r){e.$set(e.registerInfo,"realname",r)},expression:"registerInfo.realname"}})],1):e._e(),e.OptionalItems.register?t("FormItem",{staticClass:"registerInfo-code",attrs:{label:e.english.验证码,prop:"register"}},[t("Input",{ref:"register",attrs:{placeholder:e.english.验证码占位符},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.registerNow("registerInfo")}},model:{value:e.registerInfo.register,callback:function(r){e.$set(e.registerInfo,"register",r)},expression:"registerInfo.register"}}),t("img",{staticClass:"verificationCode",attrs:{src:e.codeUrl},on:{click:e.verificationCode}})],1):e._e(),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"last-item",attrs:{label:e.english.推荐人,prop:"referrercode"}},[t("Input",{ref:"referrerCode",attrs:{placeholder:e.english.推荐人占位符},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.registerNow("registerInfo")}},model:{value:e.registerInfo.referrercode,callback:function(r){e.$set(e.registerInfo,"referrercode",r)},expression:"registerInfo.referrercode"}})],1)],1),t("div",{staticClass:"log-btn"},[t("Button",{attrs:{type:"error",size:"large",loading:e.btnLoading,long:""},on:{click:function(r){return e.registerNow("registerInfo")}}},[e.btnLoading?t("span",[e._v(e._s(e.english.注册中)+"...")]):t("span",[e._v(e._s(e.english.立即注册))])]),t("div",{staticClass:"autolog-box clearfix"},[t("p",{staticClass:"text-center"},[t("router-link",{attrs:{to:"/login"}},[e._v(e._s(e.english.已有账号)+"？"+e._s(e.english.去登录))])],1)])],1)],1)])])])},s=[],n=(t("8e6e"),t("ac6a"),t("456d"),t("4917"),t("ade3")),a=(t("9cd3"),t("2f62")),o=(t("3c30"),t("0207"));function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach((function(r){Object(n["a"])(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var u=function(e,r,t){e.required&&!r?t(new Error(o.邮箱+" "+不能+" "+o.为空)):/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(r)?t():t(new Error(o.输入的邮箱格式错误))},f=function(e,r,t){e.required&&!r?t(new Error(o.真实姓名+" "+o.不能+" "+o.为空)):t()},g=function(e,r,t){e.required&&!r?t(new Error(o.验证码+" "+o.不能+" "+o.为空)):t()},d={data:function(){var e=this,r=function(r,t,i){t?/^[0-9a-z]{6,15}$/i.test(t)?t==e.userName?i(new Error(o.账号已存在)):i():i(new Error(o.账号占位符)):i(new Error(o.账号+" "+o.不能+" "+o.为空))},t=function(r,t,i){""===t?i(new Error(o.密码+" "+o.不能+" "+o.为空)):/^(?![^a-zA-Z]+$)(?!\D+$).{6,15}$/.test(t)?(""!==e.registerInfo.confirmPsd&&e.$refs.registerInfo.validateField("confirmPsd"),i()):i(new Error(o.密码占位符))},i=function(r,t,i){""===t?i(new Error(o.确认密码占位符)):t!==e.registerInfo.psd?i(new Error(o.两次密码输入不一致)):i()},s=function(r,t,i){t==e.referrer&&""!==t?i(new Error(o.推荐人不存在)):i()};return{english:o,VueTitle:o.注册,loading:!0,OptionalItems:{},Optstate:null,registerInfo:{userName:"",psd:"",confirmPsd:"",email:"",realname:"",register:"",referrercode:""},referrer:"",registerrule:{psd:[{validator:t,trigger:"blur",required:!0}],confirmPsd:[{validator:i,trigger:"blur",required:!0}],userName:[{validator:r,trigger:"blur",required:!0}],referrercode:[{validator:s,trigger:"blur"}]},pid:null,type:null,codeUrl:"",btnLoading:!1}},created:function(){var e=this;this.browserRedirect(),this.verificationCode(),this.pid=this.$route.query.pid;var r={id:this.pid?this.pid:""};this.loading=!0,this.$http.post(this.urlRequest+"?m=api&c=trend&a=getRegInfo",r).then((function(r){e.loading=!1,0==r.data.status&&(e.OptionalItems=r.data.register,e.registerInfo.referrercode=r.data.username,0==r.data.state?e.Optstate=!1:e.Optstate=!0)}))},mounted:function(){this.type=this.$route.query.type},computed:c({},Object(a["c"])(["isLogin","platformConfig"])),methods:c(c({},Object(a["b"])(["SET_ISLOGIN","SET_USER_INFO_DATA","SET_ACCOUNT_DATA"])),{},{browserRedirect:function(){var e=navigator.userAgent.toLowerCase(),r="ipad"==e.match(/ipad/i),t="iphone os"==e.match(/iphone os/i),i="midp"==e.match(/midp/i),s="rv:1.2.3.4"==e.match(/rv:1.2.3.4/i),n="ucweb"==e.match(/ucweb/i),a="android"==e.match(/android/i),o="windows ce"==e.match(/windows ce/i),l="windows mobile"==e.match(/windows mobile/i);r||t||i||s||n||a||o||l?(this._getLinkUrl(),console.log("pcmobile")):console.log("pcweb")},_getLinkUrl:function(){this.$route.query.pid&&this.$route.query.type?this.linkUrl=this.imgRequest+"/pcmobile/index.html#/reg?pid="+this.$route.query.pid+"&type="+this.$route.query.type:this.linkUrl=this.imgRequest+"/pcmobile/index.html#/reg",window.open(this.linkUrl,"_self")},verificationCode:function(){var e=(new Date).getTime();this.codeUrl=this.imgRequest+"?m=web&c=user&a=validatecode&time="+e},registerNow:function(e){var r=this;this.$refs[e].validate((function(e){if(e){var t={username:r.registerInfo.userName,password:r.registerInfo.psd,password2:r.registerInfo.confirmPsd,email:r.registerInfo.email,realname:r.registerInfo.realname,register:r.registerInfo.register,flag:"4",code:"123",type:r.type?r.type:"1",referrer:r.registerInfo.referrercode};r.btnLoading=!0,r.$http.post(r.urlRequest+"?m=api&c=user&a=reg",t).then((function(e){if(r.btnLoading=!1,0==e.data.status)localStorage.setItem("token",e.data.token),localStorage.setItem("isLogin",!0),localStorage.setItem("isUser",!0),r.$http.post(r.urlRequest+"?m=api&c=user&a=userInfo",{token:e.data.token}).then((function(e){r.SET_USER_INFO_DATA({Obj:e.data.data})})),localStorage.setItem("userData",JSON.stringify(e.data)),r.SET_ACCOUNT_DATA({Obj:{}}),r.$Message.success(o.注册成功+"!"),r.$router.push({path:"/home",name:"Home"});else if(1713==e.data.status){r.$refs.username.focus(),r.userName=r.registerInfo.userName,r.$Message.error(e.data.ret_msg);var t=r;setTimeout((function(){t.$refs.username.blur()}),20)}else if(100022==e.data.status){r.$refs.referrerCode.focus(),r.referrer=r.registerInfo.referrercode,r.$Message.error(e.data.ret_msg);t=r;setTimeout((function(){t.$refs.referrerCode.blur()}),20)}else r.$Message.error(e.data.ret_msg)})).catch((function(e){r.btnLoading=!1,r.$Message.error(o.数据请求超时)}))}}))}}),watch:{Optstate:function(e){e&&(this.registerrule.email=[{validator:u,trigger:"blur",required:this.Optstate}],this.registerrule.realname=[{validator:f,trigger:"blur",required:this.Optstate}],this.registerrule.register=[{validator:g,trigger:"blur",required:this.Optstate}])}}},p=d,m=(t("02d8"),t("2877")),h=Object(m["a"])(p,i,s,!1,null,"289d1adc",null);r["default"]=h.exports},cc59:function(e,r,t){}}]);
//# sourceMappingURL=chunk-08840882.66ddadf6.js.map