(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec246680"],{"1a16":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",[s("div",{staticClass:"userinfo-box"},[s("div",{staticClass:"userinfo-tab"},[s("a",{class:{active:e.basicInfo},attrs:{href:"javascript:void(0);"},on:{click:function(a){e.basicInfo=!0}}},[e._v(e._s(e.english.基本信息))]),s("a",{class:{active:!e.basicInfo},attrs:{href:"javascript:void(0);"},on:{click:function(a){e.basicInfo=!1}}},[e._v(e._s(e.english.头像照片))])]),e.basicInfo?s("div",{staticClass:"security-setting"},[s("ul",[s("li",{directives:[{name:"show",rawName:"v-show",value:e.flags,expression:"flags"}],staticClass:"clearfix"},[s("p",{staticClass:"fl front"},[e._v(e._s(e.english.账号))]),s("p",{staticClass:"txt fl on"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserInfo.username,expression:"newUserInfo.username"}],staticClass:"inp",attrs:{type:"text",placeholder:e.english.账号,readonly:""},domProps:{value:e.newUserInfo.username},on:{input:function(a){a.target.composing||e.$set(e.newUserInfo,"username",a.target.value)}}})])]),s("li",{staticClass:"clearfix"},[s("p",{staticClass:"fl front"},[e._v(e._s(e.english.昵称))]),s("p",{staticClass:"txt fl on hastips"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserInfo.nickname,expression:"newUserInfo.nickname"}],ref:"inpnickname",staticClass:"inp",class:{inpwritestyle:!e.changenicknameShow},attrs:{type:"text",readonly:"true",placeholder:e.english.请输入+" "+e.english.昵称,maxlength:8},domProps:{value:e.newUserInfo.nickname},on:{input:function(a){a.target.composing||e.$set(e.newUserInfo,"nickname",a.target.value)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nullnickname,expression:"nullnickname"}],staticClass:"nctips"},[e._v(e._s(e.english.昵称+" "+e.english.不能+" "+e.english.为空))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.tipsnickname,expression:"tipsnickname"}],staticClass:"nctips"},[e._v(e._s(e.english.只能输入汉字和字母))])]),s("p",{staticClass:"tool fr"},[s("a",{directives:[{name:"show",rawName:"v-show",value:e.changenicknameShow,expression:"changenicknameShow"}],staticClass:"activeStyle",attrs:{href:"javascript:void(0)"},on:{click:e.changeNickname}},[e._v(e._s(e.english.修改))])]),s("p",{staticClass:"tool fr"},[s("a",{directives:[{name:"show",rawName:"v-show",value:!e.changenicknameShow,expression:"!changenicknameShow"}],staticClass:"activeStyle",attrs:{href:"javascript:void(0)"},on:{click:e.changeNickNameok}},[e._v(e._s(e.english.确定))])])]),s("li",{staticClass:"clearfix"},[s("p",{staticClass:"fl front"},[e._v(e._s(e.english.手机))]),s("p",{staticClass:"txt fl on"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserInfo.mobile,expression:"newUserInfo.mobile"}],staticClass:"inp",attrs:{type:"text",readonly:""},domProps:{value:e.newUserInfo.mobile},on:{input:function(a){a.target.composing||e.$set(e.newUserInfo,"mobile",a.target.value)}}})])]),s("li",{staticClass:"clearfix"},[s("p",{staticClass:"fl front"},[e._v(e._s(e.english.邮箱))]),s("p",{staticClass:"txt fl on hastips"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newUserInfo.email,expression:"newUserInfo.email"}],ref:"inpemail",staticClass:"inp",class:{inpwritestyle:!e.changeemailShow},attrs:{type:"text",placeholder:e.english.邮箱占位符,maxlength:30,readonly:"true"},domProps:{value:e.newUserInfo.email},on:{input:function(a){a.target.composing||e.$set(e.newUserInfo,"email",a.target.value)}}}),s("span",{directives:[{name:"show",rawName:"v-show",value:e.nullemail,expression:"nullemail"}],staticClass:"nctipsqq"},[e._v(e._s(e.english.邮箱+" "+e.english.不能+" "+e.english.为空))]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.tipsemail,expression:"tipsemail"}],staticClass:"nctipsqq"},[e._v(e._s(e.english.输入的邮箱格式错误))])]),s("p",{staticClass:"tool fr"},[s("a",{directives:[{name:"show",rawName:"v-show",value:e.changeemailShow,expression:"changeemailShow"}],staticClass:"activeStyle",attrs:{href:"javascript:void(0)"},on:{click:e.changeEmail}},[e._v(e._s(e.english.修改))])]),s("p",{staticClass:"tool fr"},[s("a",{directives:[{name:"show",rawName:"v-show",value:!e.changeemailShow,expression:"!changeemailShow"}],staticClass:"activeStyle",attrs:{href:"javascript:void(0)"},on:{click:e.changeemailok}},[e._v(e._s(e.english.确定))])])])])]):s("div",{staticClass:"fix-img clearfix"},[s("div",{staticClass:"left fl"},[s("div",{staticClass:"upload-img"},[s("span",{staticClass:"icon icon-upload"}),e._v(e._s(e.english.选择您要上传的图片)+"\n\t\t\t\t\t\t"),s("input",{ref:"upload",attrs:{type:"file"},on:{change:e.upAvatar}})]),s("p",{staticClass:"tips"},[e._v(e._s(e.english.仅支持)+" JPG、GIF、PNG、JPEG、BMP "+e._s(e.english.格式)+"，"+e._s(e.english.文件小于4M))]),s("div",{staticClass:"img-box"},[e.avatarImg?s("div",{staticClass:"img-wrap"},[s("canvas",{staticClass:"canvas",staticStyle:{display:"none"}}),s("img",{attrs:{src:e.avatarImg,alt:""}})]):e._e()]),s("div",{staticClass:"recommend-img"},[s("div",{staticClass:"title"},[e._v(e._s(e.english.推荐头像))]),e.avatarList.length?s("ul",{staticClass:"avatar-list clearfix"},e._l(e.avatarList,(function(a,i){return s("li",{key:i,class:{active:e.avatarIndex==i},on:{click:function(a){return e.defaultAvatar(i)}}},[a.avatar_url?s("img",{attrs:{src:e.imgRequest+a.avatar_url,alt:""},on:{error:function(a){return e.emptyuserPicUrl(i)}}}):s("img",{attrs:{src:t("ca39")}})])})),0):e._e(),s("Button",{staticClass:"save-btn",attrs:{type:"primary",loading:e.btnLoading},on:{click:e.saveAvatar}},[e.btnLoading?s("span",[e._v(e._s(e.english.保存中)+"...")]):s("span",[e._v(e._s(e.english.保存))])])],1)]),s("div",{staticClass:"right fl"},[s("div",{staticClass:"title"},[e._v(e._s(e.english.效果预览))]),s("p",{staticClass:"tips"},[e._v(e._s(e.english.你上传的图片会自动生成2种尺寸+"，"+e.english.请注意小尺寸的头像是否清晰))]),s("div",{staticClass:"img-wrap"},[e.avatarImg?s("img",{attrs:{src:e.avatarImg,alt:""}}):e._e()]),s("p",{staticClass:"tips"},[e._v("100*100 "+e._s(e.english.像素))]),s("div",{staticClass:"img-wrap small-img"},[e.avatarImg?s("img",{attrs:{src:e.avatarImg,alt:""}}):e._e()]),s("p",{staticClass:"tips"},[e._v("50*50 "+e._s(e.english.像素))])])])])])},i=[],n=(t("8e6e"),t("ac6a"),t("456d"),t("28a5"),t("7f7f"),t("ade3")),r=(t("9cd3"),t("3c30"),t("2f62")),l=t("0207");function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);a&&(s=s.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,s)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){Object(n["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var u={data:function(){return{english:l,flags:"",ncnullshow:!1,nctipsshow:!1,nullnickname:!1,tipsnickname:!1,nullemail:!1,tipsemail:!1,basicInfo:!0,changenicknameShow:!0,changeemailShow:!0,nickname:"",userInfoFlag:!1,avatarList:[],avatarIndex:-1,avatarImg:null,username:"",newUserInfo:{username:"",nickname:"",mobile:"",email:"",weixin:"",qq:""},btnLoading:!1}},created:function(){this.getBankedData(),this._getAvatarList(),this.flags=JSON.parse(localStorage.getItem("isUser")),this.userInfo&&this.userInfo.username&&(this.newUserInfo={username:this.userInfo.username,nickname:this.userInfo.nickname,mobile:this.userInfo.mobile,email:this.userInfo.email})},computed:c({},Object(r["c"])(["userInfo","accountData","bankedData"])),methods:c(c({},Object(r["b"])(["SET_ACCOUNT_DATA","SET_BANKED_DATA","SET_USER_INFO_DATA"])),{},{emptyuserPicUrl:function(e){this.avatarList[e].avatar_url=""},changeNickname:function(){this.changenicknameShow=!1,this.$refs.inpnickname.focus(),this.$refs.inpnickname.readOnly=!1,this.userInfoFlag=!1},changeNickNameok:function(){var e=this;if(""==this.newUserInfo.nickname||null==this.newUserInfo.nickname)return this.nullnickname=!0,void(this.tipsnickname=!1);if(!/^[A-Za-z0-9]{0,8}$/.test(this.newUserInfo.nickname))return this.nullnickname=!1,void(this.tipsnickname=!0);this.nullnickname=!1,this.tipsnickname=!1;var a={token:localStorage.getItem("token"),nickname:this.newUserInfo.nickname};this.$http.post(this.urlRequest+"?m=api&c=user&a=setInfo",a).then((function(a){if(0==a.data.status){e.changenicknameShow=!0,e.$Message.success(l.修改昵称成功+"!"),e.$refs.inpnickname.readOnly=!0,e.userInfoFlag=!0;var t=e.userInfo;t["nickname"]=e.newUserInfo.nickname,e.SET_USER_INFO_DATA({Obj:t})}else e.$Message.error(a.data.ret_msg)}))},changeEmail:function(){this.changeemailShow=!1,this.$refs.inpemail.focus(),this.$refs.inpemail.readOnly=!1,this.userInfoFlag=!1},changeemailok:function(){var e=this;if(""==this.newUserInfo.email||null==this.newUserInfo.email)return this.nullemail=!0,void(this.tipsemail=!1);if(!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.newUserInfo.email))return this.nullemail=!1,void(this.tipsemail=!0);this.nullemail=!1,this.tipsemail=!1;var a={token:localStorage.getItem("token"),email:this.newUserInfo.email};this.$http.post(this.urlRequest+"?m=api&c=user&a=setInfo",a).then((function(a){if(0==a.data.status){e.changeemailShow=!0,e.userInfo.email=e.userInfo.email,e.$Message.success(l.修改邮箱成功+"!"),e.$refs.inpemail.readOnly=!0,e.userInfoFlag=!0;var t=e.userInfo;t["email"]=e.newUserInfo.email,e.SET_USER_INFO_DATA({Obj:t})}else e.$Message.error(a.data.ret_msg)}))},_getAvatarList:function(){var e=this,a={};a.token=localStorage.getItem("token"),a.avatar_num="9",this.$http.post(this.urlRequest+"?m=api&c=avatar&a=avatarList",a).then((function(a){0==a.data.status?e.avatarList=a.data.avatar_list:e.$Message.error(a.data.ret_msg)}))},upAvatar:function(){this.avatarIndex=-1;var e=this,a=4,t=this.$refs.upload,s=t.files[0];if(!/\.(?:JPG|GIF|PNG|JPEG|BMP)$/i.test(s.name))return this.$Message.error(l.仅支持+"JPG、GIF、PNG、JPEG、BMP "+l.格式),!1;if(s.size>1024*a*1024)return this.$Message.error(l.图片大小超过限制+", "+l.请限制在+" "+a+"M"),!1;var i=new Image;i.src=e.getObjectURL(s),i.onload=function(){e.avatarImg=e.getBase64Image(i)}},getObjectURL:function(e){var a=null;return void 0!=window.createObjectURL?a=window.createObjectURL(e):void 0!=window.URL?a=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(a=window.webkitURL.createObjectURL(e)),a},getBase64Image:function(e){var a=document.createElement("canvas");a.width=150,a.height=150;var t=a.getContext("2d");t.drawImage(e,0,0,150,150);var s=e.src.substring(e.src.lastIndexOf(".")+1).toLowerCase(),i=a.toDataURL("image/"+s);return i},defaultAvatar:function(e){this.avatarIndex=e,this.avatarImg="",this.$refs.upload.value=""},saveAvatar:function(){var e=this;if(-1!=this.avatarIndex||this.avatarImg)if(this.btnLoading=!0,this.avatarImg){var a={};a.token=localStorage.getItem("token"),a.avatar=this.avatarImg.split(",")[1],this.$http.post(this.urlRequest+"?m=api&c=user&a=saveAvatar",a).then((function(a){e.btnLoading=!1,0==a.data.status?(e.$Message.success(l.保存成功),e.userInfo.avatar=a.data.avatar):e.$Message.error(a.data.ret_msg)})).catch((function(a){e.btnLoading=!1,e.$Message.error(l.数据请求超时)}))}else{a={};a.token=localStorage.getItem("token"),a.avatar_url=this.avatarList[this.avatarIndex].avatar_url,this.$http.post(this.urlRequest+"?m=api&c=user&a=saveDefaultAvatar",a).then((function(a){e.btnLoading=!1,0==a.data.status?(e.$Message.success(l.保存成功),e.userInfo.avatar=a.data.avatar_url):e.$Message.error(a.data.ret_msg)})).catch((function(a){e.btnLoading=!1,e.$Message.error(l.数据请求超时)}))}else this.$Message.error(l.请选择头像)},getBankedData:function(){var e=this,a={token:localStorage.getItem("token")};this.$http.post(this.urlRequest+"?m=api&c=bank&a=getUserBank",a).then((function(a){localStorage.setItem("bankedData",JSON.stringify(a.data)),e.SET_BANKED_DATA({obj:a.data})}))}}),watch:{userInfo:function(e){e.username&&(this.newUserInfo={username:this.userInfo.username,nickname:this.userInfo.nickname,mobile:this.userInfo.mobile,email:this.userInfo.email})}}},h=u,m=(t("db76"),t("2877")),v=Object(m["a"])(h,s,i,!1,null,"64e77973",null);a["default"]=v.exports},"28a5":function(e,a,t){"use strict";var s=t("aae3"),i=t("cb7c"),n=t("ebd6"),r=t("0390"),l=t("9def"),o=t("5f1b"),c=t("520a"),u=t("79e5"),h=Math.min,m=[].push,v="split",f="length",g="lastIndex",p=4294967295,d=!u((function(){RegExp(p,"y")}));t("214f")("split",2,(function(e,a,t,u){var w;return w="c"=="abbc"[v](/(b)*/)[1]||4!="test"[v](/(?:)/,-1)[f]||2!="ab"[v](/(?:ab)*/)[f]||4!="."[v](/(.?)(.?)/)[f]||"."[v](/()()/)[f]>1||""[v](/.?/)[f]?function(e,a){var i=String(this);if(void 0===e&&0===a)return[];if(!s(e))return t.call(i,e,a);var n,r,l,o=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,v=void 0===a?p:a>>>0,d=new RegExp(e.source,u+"g");while(n=c.call(d,i)){if(r=d[g],r>h&&(o.push(i.slice(h,n.index)),n[f]>1&&n.index<i[f]&&m.apply(o,n.slice(1)),l=n[0][f],h=r,o[f]>=v))break;d[g]===n.index&&d[g]++}return h===i[f]?!l&&d.test("")||o.push(""):o.push(i.slice(h)),o[f]>v?o.slice(0,v):o}:"0"[v](void 0,0)[f]?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,s){var i=e(this),n=void 0==t?void 0:t[a];return void 0!==n?n.call(t,i,s):w.call(String(i),t,s)},function(e,a){var s=u(w,e,this,a,w!==t);if(s.done)return s.value;var c=i(e),m=String(this),v=n(c,RegExp),f=c.unicode,g=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(d?"y":"g"),I=new v(d?c:"^(?:"+c.source+")",g),_=void 0===a?p:a>>>0;if(0===_)return[];if(0===m.length)return null===o(I,m)?[m]:[];var k=0,b=0,C=[];while(b<m.length){I.lastIndex=d?b:0;var x,U=o(I,d?m:m.slice(b));if(null===U||(x=h(l(I.lastIndex+(d?0:b)),m.length))===k)b=r(m,b,f);else{if(C.push(m.slice(k,b)),C.length===_)return C;for(var S=1;S<=U.length-1;S++)if(C.push(U[S]),C.length===_)return C;b=k=x}}return C.push(m.slice(k)),C}]}))},"80af":function(e,a,t){},ca39:function(e,a,t){e.exports=t.p+"pcweb/img/head_default.97c2ebec.png"},db76:function(e,a,t){"use strict";t("80af")}}]);
//# sourceMappingURL=chunk-ec246680.606f482f.js.map