(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-133dace9"],{"5a9e":function(a,t,e){"use strict";e("d449")},"8fae":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("h2",{staticClass:"public-title"},[a._v(" "+a._s(a.english.银行卡管理))]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.accountData.is_banded_bank,expression:"accountData.is_banded_bank"}],staticClass:"bank-box clearfix"},[e("div",{staticClass:"img-bank fl"}),e("div",{directives:[{name:"show",rawName:"v-show",value:1!=a.userBankedData.bank_type&&2!=a.userBankedData.bank_type,expression:"(userBankedData.bank_type!=1&&userBankedData.bank_type!=2)"}],staticClass:"fl bank-info"},[e("p",{staticClass:"open-bank"},[e("span",{staticClass:"title"},[a._v(a._s(a.english.开户银行))]),e("span",{staticClass:"word"},[a._v(a._s("未知"==a.userBankedData.bank?"Unknown":a.userBankedData.bank))])]),e("p",[e("span",{staticClass:"title"},[a._v(a._s(a.english.开户人姓名))]),e("span",{staticClass:"word"},[a._v(a._s(a.cardInfo.name))])]),e("p",[e("span",{staticClass:"title"},[a._v(a._s(a.english.银行账号))]),a.cardInfo.account?e("span",{staticClass:"word"},[a._v("\n          "+a._s((a.cardInfo.account.substring(0,a.cardInfo.account.length-4).replace(/[\w]/g,"*")+a.cardInfo.account.substring(a.cardInfo.account.length-4,a.cardInfo.account.length)).replace(/\s/g,"").replace(/(.{4})/g,"$1 "))+"\n        ")]):a._e()])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:!a.accountData.is_banded_bank,expression:"!accountData.is_banded_bank"}],staticClass:"no-bind"},[e("p",[a._v(a._s(a.english.您还没有绑定银行卡)+"， "),e("span",{staticClass:"bth pink-bth",on:{click:a.bindNewCard}},[e("Button",{attrs:{type:"error"},on:{click:a.changCard}},[a._v(a._s(a.english.立即绑定))])],1)])]),e("Modal",{staticClass:"mySelf",attrs:{title:a.accountData.is_banded_bank?a.modification:a.binding,width:"490"},on:{"on-cancel":a.bindCardCancel},model:{value:a.bindCardShow,callback:function(t){a.bindCardShow=t},expression:"bindCardShow"}},[e("div",{staticClass:"outerBox"},[e("div",{staticClass:"input-box "},[e("div",{staticClass:"lableStyle bank-infol"},[a._v(a._s(a.english.开户银行))]),e("div",{staticClass:"list-box"},[e("p",{directives:[{name:"show",rawName:"v-show",value:1==a.is_DepositBank.UnionPay,expression:"is_DepositBank.UnionPay==1"}],class:{active:a.cardShow},on:{click:function(t){return a.bindCard("ali","wx")}}},[e("span",{staticClass:"icon icon-bank"}),a._v(a._s(a.english.银行卡))])])]),e("Form",{directives:[{name:"show",rawName:"v-show",value:a.cardShow,expression:"cardShow"}],ref:"card",attrs:{model:a.cardForm,rules:a.cardrule,"label-width":130,"label-position":"right"}},[e("FormItem",{attrs:{label:a.english.持卡人,prop:"cardOwner"}},[e("Input",{attrs:{type:"text",disabled:!!a.userBankedData.name,placeholder:a.english.请输入持卡人姓名},model:{value:a.cardForm.cardOwner,callback:function(t){a.$set(a.cardForm,"cardOwner",t)},expression:"cardForm.cardOwner"}})],1),e("FormItem",{attrs:{label:a.english.银行卡号,prop:"cardNumber"}},[e("Input",{attrs:{type:"text",maxlength:19,placeholder:a.english.请输入银行卡号},model:{value:a.cardForm.cardNumber,callback:function(t){a.$set(a.cardForm,"cardNumber",t)},expression:"cardForm.cardNumber"}})],1),e("FormItem",{attrs:{label:a.english.发卡银行,prop:"cardOfBank"}},[e("Input",{attrs:{type:"text",placeholder:"Please input bank name"},model:{value:a.cardForm.cardOfBank,callback:function(t){a.$set(a.cardForm,"cardOfBank",t)},expression:"cardForm.cardOfBank"}})],1),e("FormItem",{attrs:{label:"Branch name",prop:"branchName"}},[e("Input",{attrs:{type:"text",placeholder:"Please input branch name"},model:{value:a.cardForm.branchName,callback:function(t){a.$set(a.cardForm,"branchName",t)},expression:"cardForm.branchName"}})],1),e("FormItem",{attrs:{label:a.english.手机号码,prop:"tel"}},[e("Input",{attrs:{type:"text",maxlength:11,placeholder:a.english.手机号码占位符},model:{value:a.cardForm.tel,callback:function(t){a.$set(a.cardForm,"tel",t)},expression:"cardForm.tel"}})],1)],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:a.cardShow,expression:"cardShow"}],attrs:{slot:"footer",align:"center"},slot:"footer"},[e("Button",{attrs:{type:"error"},on:{click:function(t){return a.bindcardOK("card")}}},[a._v(a._s(a.english.确定))]),e("Button",{on:{click:function(t){return a.bindcardCancle("card")}}},[a._v(a._s(a.english.取消))])],1)])],1)},r=[],s=(e("8e6e"),e("456d"),e("7f7f"),e("ac6a"),e("ade3")),c=e("9cd3"),i=e("2f62"),o=e("aa82"),d=e("0207");function l(a,t){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),e.push.apply(e,n)}return e}function u(a){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?l(Object(e),!0).forEach((function(t){Object(s["a"])(a,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))}))}return a}var b={data:function(){var a=function(a,t,e){""===t?e(new Error(d.真实姓名+" "+d.不能+" "+d.为空)):e()},t=function(a,t,e){""===t?e(new Error(d.请输入银行卡号)):/^([1-9]{1})(\d+)$/.test(t)?e():e(new Error(d.请输入位卡号))},e=function(a,t,e){""===t?e(new Error("Please input the bank card")):e()},n=function(a,t,e){""===t?e(new Error("Please input branch name")):e()},r=function(a,t,e){""===t||/^[0-9]+$/.test(t)?e():e(new Error(d.输入的手机号码格式错误+"！"))};return{english:d,modification:d.修改银行卡,binding:d.绑定银行卡,is_setBank:!1,Alipay:"",is_DepositBank:[],myNickname:"",citys:[],obj:[],citysObj:[],citysObj2:[],userAccounData:{},userBankedData:{},cardInfo:{},userData:"",bindCardShow:!1,cardShow:!1,cardForm:{cardOwner:"",cardNumber:"",cardOfBank:"",branchName:"",tel:""},cardrule:{cardOwner:[{required:!0,validator:a,trigger:"blur"}],cardNumber:[{required:!0,validator:t,trigger:"blur"}],cardOfBank:[{required:!0,validator:e,trigger:"blur"}],branchName:[{required:!0,validator:n,trigger:"blur"}],tel:[{validator:r,trigger:"blur"}]}}},computed:u({},Object(i["c"])(["bankedData","accountData","userInfo"])),created:function(){var a=this;this.getUserIsBindCard(),this.userAccounData=this.accountData,this.$http.post("?m=api&c=bank&a=getConfigBanks").then((function(t){a.obj=t.data.list})),this.citysObj=o,this.$http.post("?m=api&c=bank&a=switchCardType").then((function(t){a.is_DepositBank=t.data.data,1==a.is_DepositBank.WeChat||1==a.is_DepositBank.Alipay||(a.cardShow=!0)}))},methods:u(u({},Object(i["b"])(["SET_BANKED_DATA","SET_ACCOUNT_DATA","SET_USER_INFO_DATA"])),{},{bindCardCancel:function(){if(this.cardShow)return this.cardForm.cardNumber="",this.cardForm.cardOfBank="",this.citys="",this.cardForm.branchName="",void(this.cardForm.tel="")},mychange:function(){this.citysObj2=[];var a=this;setTimeout((function(){o.forEach((function(t,e){a.citys==t.name&&(a.citysObj2=t.city)}))}),20)},getUserIsBindCard:function(){var a=this,t={token:localStorage.getItem("token")},e=this;this.$http.post(this.urlRequest+"?m=api&c=bank&a=getUserBank",Object(c["a"])(t)).then((function(t){0!==t.data.is_setBank?a.is_setBank=!1:a.is_setBank=!0,e.userBankedData=t.data,t.data.name&&(a.cardForm.cardOwner=t.data.name),e.cardInfo=t.data,1==e.userBankedData.bank_type||e.userBankedData.bank_type,localStorage.setItem("bankedData",JSON.stringify(t.data)),e.SET_BANKED_DATA({obj:t.data})}))},bindNewCard:function(){this.bindCardShow=!0},bindCard:function(a,t){this.bindCardCancel(),this.wxShow=!1,this.aliShow=!1,this.cardShow=!0},bindcardOK:function(a){var t=this;this.$http.post("?m=api&c=bank&a=getConfigBanks").then((function(e){0==e.data.status?(e.data.list.forEach((function(a){a.name,t.cardForm.cardOfBank})),t.$refs[a].validate((function(a){if(a){var e={cardForm:{cardOwner:"",cardNumber:"",cardOfBank:"",branchName:"",tel:""},token:localStorage.getItem("token"),name:t.cardForm.cardOwner,account:t.cardForm.cardNumber,bank:t.cardForm.cardOfBank,branch:t.cardForm.branchName,mobile:t.cardForm.tel};t.$http.post(t.urlRequest+"?m=api&c=bank&a=bank",Object(c["a"])(e)).then((function(a){if(0==a.data.ret_msg){t.bindCardShow=!1,t.$Message.success(d.绑定银行卡成功+"!"),t.userAccounData.is_banded_bank="1",t.bindCardCancel();var e=t.userInfo;e["realname"]=t.cardForm.cardOwner,t.SET_USER_INFO_DATA({Obj:e}),t.SET_ACCOUNT_DATA({Obj:t.userAccounData}),t.getUserIsBindCard()}else t.$Message.error(a.data.ret_msg)}))}}))):t.$Message.error(e.data.ret_msg)}))},bindcardCancle:function(a){this.bindCardCancel(),this.bindCardShow=!1},changCard:function(){this.bindCardShow=!0}}),watch:{$route:function(){var a=this;this.getUserIsBindCard(),this.userAccounData=this.accountData,this.$http.post("?m=api&c=bank&a=getConfigBanks").then((function(t){a.obj=t.data.list})),this.citysObj=o,this.$http.post("?m=api&c=bank&a=switchCardType").then((function(t){a.is_DepositBank=t.data.data,1==a.is_DepositBank.WeChat||1==a.is_DepositBank.Alipay||(a.cardShow=!0)}))},citys:function(a){}}},h=b,p=(e("5a9e"),e("bd1c"),e("2877")),m=Object(p["a"])(h,n,r,!1,null,"7622d8a8",null);t["default"]=m.exports},"9a8b":function(a,t,e){},bd1c:function(a,t,e){"use strict";e("9a8b")},d449:function(a,t,e){}}]);
//# sourceMappingURL=chunk-133dace9.3c045da9.js.map